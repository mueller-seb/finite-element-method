function [ value ] = integralTriangle( fun, nodes )
%INTEGRALTRIANGLE Summary of this function goes here
%   Detailed explanation goes here

xw = [-sqrt(3/5), 5/9;
      0, 8/9;
      sqrt(3/5), 5/9];

X = [nodes.x]';
Y = [nodes.y]';

    function value = xi(a, b)
        value = (1+a)*(1-b)/4;
    end

    function value = eta(a, b)
        value = (1+b)/2;
    end

    function det = J(a, b)
        det = (1-b)/8;
    end

    function N = shapeN(xi, eta)
        N = [1-xi-eta, xi, eta];
    end
    
    function x = P(xi, eta)
        N = shapeN(xi, eta);
        x=0;
        for i = 1:3
            x = x + X(i)*N(i);
        end
    end

    function y = Q(xi, eta)
        N = shapeN(xi, eta);
        y=0;
        for i = 1:3
            y = y + Y(i)*N(i);
        end
    end
        

A_K = abs(X(1)*(Y(2)-Y(3))+X(2)*(Y(3)-Y(1))+X(3)*(Y(1)-Y(2)))/2;

sum = 0;
for i=1:size(xw, 1)
    for j=1:size(xw, 1)
        a = xw(i, 1);
        b = xw(j, 1);
        sum = sum + xw(i,2)*xw(j,2)*fun(P(xi(a,b), eta(a,b)), Q(xi(a,b), eta(a,b)))*abs(J(a,b));
        sum = sum*2*A_K;
    end
end
    
    value = sum;   
        


end

